!function(){"use strict";var e={p:""},t={formSelector:".popup__form",inputSelector:".popup__item",submitButtonSelector:".button_save",inactiveButtonClass:"button_save_disabled",inputErrorClass:"popup__item-invalid",errorClass:"popup__item-error_active"};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:String(t)}var i=function(){function e(t,n,r,o){var i=o.handleClickImage;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.placeName=t,this.linkUrl=n,this.templateSelector=r,this._handleClickImage=i}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){var e=document.querySelector(this.templateSelector).content.querySelector(".element").cloneNode(!0);return e.querySelector(".element__title").textContent=this.placeName,e.querySelector(".element__image").src=this.linkUrl,e}},{key:"_setEventListeners",value:function(){var e=this,t=this._cardElement.querySelector(".button_delete"),n=this._cardElement.querySelector(".element__image"),r=this._cardElement.querySelector(".button_like");t.addEventListener("click",(function(){e._cardElement.remove()})),n.addEventListener("click",this._handleClickImage),r.addEventListener("click",(function(){r.classList.toggle("button_like-black")}))}},{key:"generateCard",value:function(){return this._cardElement=this._getTemplate(),this._setEventListeners(),this._cardElement}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function c(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:String(t)}var s=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_checkInputValidity",(function(e,t,n,o){t.validity.valid?r._hideInputError(e,t,n,o):r._showInputError(e,t,t.validationMessage,n,o)})),c(this,"_showInputError",(function(e,t,n,r,o){var i=e.querySelector(".".concat(t.id,"-error"));t.classList.add(r),i.textContent=n,i.classList.add(o)})),c(this,"_hideInputError",(function(e,t,n,r){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n),o.classList.remove(r),o.textContent=""})),c(this,"_toggleButtonState",(function(e,t,n){if(Array.isArray(e)&&r._hasInvalidInput(e))t.classList.add(n),t.disabled=!0;else{if(!t)return;t.classList.remove(n),t.disabled=!1}})),this.selectorsConfig=t,this.formElement=n}var t,n;return t=e,(n=[{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"enableValidation",value:function(){var e=this;this.formElement.addEventListener("submit",(function(e){e.preventDefault()}));var t=this.formElement.querySelectorAll(this.selectorsConfig.inputSelector),n=Array.from(t),r=this.formElement.querySelector(this.selectorsConfig.submitButtonSelector);this._toggleButtonState(n,r,this.selectorsConfig.inactiveButtonClass),n.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(e.formElement,t,e.selectorsConfig.inputErrorClass,e.selectorsConfig.errorClass),e._toggleButtonState(n,r,e.selectorsConfig.inactiveButtonClass)}))}))}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:String(t)}var m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._popupCloseButton=this._popupElement.querySelector(".button_close"),this._handleEscClose=this._handleEscClose.bind(this),this._popupCloseOverlay=this._popupElement.querySelector(".popup__overlay"),this.setEventListeners()}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupCloseButton.addEventListener("click",(function(){e.close()})),this._popupCloseOverlay.addEventListener("click",(function(){e.close()}))}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:String(t)}function h(e,t,n){return t=S(t),function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_()?Reflect.construct(t,n||[],S(e).constructor):t.apply(e,n))}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_=function(){return!!e})()}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}var E=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=h(this,t,[e]))._popupImage=n._popupElement.querySelector(".popup__image"),n._popupTitle=n._popupElement.querySelector(".popup__title"),n}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),n=t,(r=[{key:"open",value:function(e,n){this._popupImage.src=e,this._popupImage.alt=n,this._popupTitle.textContent=n,g(S(t.prototype),"open",this).call(this)}}])&&v(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(m);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function C(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:String(t)}function O(e,t,n){return t=L(t),function(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,P()?Reflect.construct(t,n||[],L(e).constructor):t.apply(e,n))}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},q.apply(this,arguments)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}var T=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=O(this,t,[e]))._submitCallback=n,r}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),n=t,(r=[{key:"close",value:function(){this._popupElement.querySelector("form"),q(L(t.prototype),"close",this).call(this)}},{key:"_getInputValues",value:function(){var e={},t=this._popupElement.querySelector("form");return Array.from(t.querySelectorAll("input")).forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;q(L(t.prototype),"setEventListeners",this).call(this);var n=this._popupElement.querySelector("form");n.addEventListener("submit",(function(t){t.preventDefault(),e._submitCallback(e._getInputValues()),e.close(),n.reset()}))}}])&&k(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(m);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}function x(e){var t=function(e,t){if("object"!=R(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:String(t)}var A=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.appendChild(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var e=this;this.clear(),this._items.forEach((function(t){e._renderer(t)}))}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U(r.key),r)}}function U(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:String(t)}var M=function(){function e(t){var n=t.usernameSelector,r=t.jobSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._username=document.querySelector(n),this._job=document.querySelector(r)}var t,n;return t=e,n=[{key:"getUserInfo",value:function(){return{username:this._username.textContent,job:this._job.textContent}}},{key:"setUserInfo",value:function(e){var t=e.username,n=e.job;this._username.textContent=t,this._job.textContent=n}}],n&&D(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),N=e.p+"images/valle.jpg",G=e.p+"images/Rushmore.jpg",H=e.p+"images/canon.jpg",Y=e.p+"images/tahoe.jpg",z=e.p+"images/ruta.jpg",F=e.p+"images/Roswell.jpg",J=(e.p,e.p,document.querySelector(".button_edit")),K=document.querySelector(".profile__name"),Q=document.querySelector(".profile__job"),W=document.forms.edit,X=W.elements.name,Z=W.elements.job,$=document.querySelector(".button_add"),ee=document.querySelector(".elements"),te=[{name:"Valle de Yosemite",link:N},{name:"Monte Rushmore",link:G},{name:"Gran CaÃ±on",link:H},{name:"Lago Tahoe",link:Y},{name:"Ruta 66",link:z},{name:"Roswell",link:F}],ne=new E(".popup_image"),re=new T(".popup_profile",(function(e){K.textContent=e.name,Q.textContent=e.job,re.close()})),oe=new T(".popup_add",(function(e){var t=new i(e.title,e.url,"#card-template",{handleClickImage:function(){ne.open(e.url,e.title)}});ee.prepend(t.generateCard())}));J.addEventListener("click",(function(){var e=ie.getUserInfo();X.value=e.username,Z.value=e.job,re.open()})),$.addEventListener("click",(function(){oe.open()}));var ie=new M({usernameSelector:".profile__name",jobSelector:".profile__job"}),ue=new A({items:te,renderer:function(e){var t=new i(e.name,e.link,"#card-template",{handleClickImage:function(){ne.open(e.link,e.name)}});ue.addItem(t.generateCard())}},".elements");ue.renderItems(),Array.from(document.querySelectorAll(t.formSelector)).forEach((function(e){new s(t,e).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b0MsR0FBZSxJQUFJakQsRUFDdkIsQ0FDRUUsTUFBTzJCLEdBQ1AxQixTQUFVLFNBQUNPLEdBQ1QsSUFBTThCLEVBQVUsSUFBSWpJLEVBQUttRyxFQUFLYixLQUFNYSxFQUFLb0IsS0FBTSxpQkFBa0IsQ0FDL0RsSCxpQkFBa0IsV0FDaEJ5SCxHQUFXTSxLQUFLakMsRUFBS29CLEtBQU1wQixFQUFLYixLQUNsQyxJQUVGb0QsR0FBYUMsUUFBUVYsRUFBUUssZUFDL0IsR0FFRixhQUdGSSxHQUFhRSxjQUViL0YsTUFBTVUsS0FBSzNDLFNBQVMwQyxpQkFBaUI3RCxFQUFnQkMsZUFBZStELFNBQ2xFLFNBQUMzQixHQUN1QixJQUFJRCxFQUFjcEMsRUFBaUJxQyxHQUMzQytHLGtCQUNoQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL0NvbnN0LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJleHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2FyZChjYXJkRWxlbWVudCkge1xuICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUxpa2UoYnV0dG9uX2xpa2UpIHtcbiAgYnV0dG9uX2xpa2UuY2xhc3NMaXN0LnRvZ2dsZShcImJ1dHRvbl9saWtlLWJsYWNrXCIpO1xufVxuXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pdGVtXCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5idXR0b25fc2F2ZVwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImJ1dHRvbl9zYXZlX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faXRlbS1pbnZhbGlkXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2l0ZW0tZXJyb3JfYWN0aXZlXCIsXG59O1xuIiwiaW1wb3J0IHsgcmVtb3ZlQ2FyZCwgdG9nZ2xlTGlrZSB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihwbGFjZU5hbWUsIGxpbmtVcmwsIHRlbXBsYXRlU2VsZWN0b3IsIHsgaGFuZGxlQ2xpY2tJbWFnZSB9KSB7XG4gICAgdGhpcy5wbGFjZU5hbWUgPSBwbGFjZU5hbWU7XG4gICAgdGhpcy5saW5rVXJsID0gbGlua1VybDtcbiAgICB0aGlzLnRlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNsaWNrSW1hZ2UgPSBoYW5kbGVDbGlja0ltYWdlO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy50ZW1wbGF0ZVNlbGVjdG9yKS5jb250ZW50O1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMucGxhY2VOYW1lO1xuICAgIGNvbnN0IGNhcmRJbWFnZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XG4gICAgY2FyZEltYWdlLnNyYyA9IHRoaXMubGlua1VybDtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBkZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl9kZWxldGVcIik7XG4gICAgY29uc3QgY2xpY2tJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XG4gICAgY29uc3QgbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX2xpa2VcIik7XG5cbiAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHJlbW92ZUNhcmQodGhpcy5fY2FyZEVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgY2xpY2tJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tJbWFnZSk7XG5cbiAgICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0b2dnbGVMaWtlKGxpa2VCdXR0b24pO1xuICAgIH0pO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yc0NvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLnNlbGVjdG9yc0NvbmZpZyA9IHNlbGVjdG9yc0NvbmZpZztcbiAgICB0aGlzLmZvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKFxuICAgIGZvcm1FbGVtZW50LFxuICAgIGlucHV0RWxlbWVudCxcbiAgICBpbnB1dEVycm9yQ2xhc3MsXG4gICAgZXJyb3JDbGFzc1xuICApID0+IHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoXG4gICAgICAgIGZvcm1FbGVtZW50LFxuICAgICAgICBpbnB1dEVsZW1lbnQsXG4gICAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSxcbiAgICAgICAgaW5wdXRFcnJvckNsYXNzLFxuICAgICAgICBlcnJvckNsYXNzXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihcbiAgICAgICAgZm9ybUVsZW1lbnQsXG4gICAgICAgIGlucHV0RWxlbWVudCxcbiAgICAgICAgaW5wdXRFcnJvckNsYXNzLFxuICAgICAgICBlcnJvckNsYXNzXG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuICBfc2hvd0lucHV0RXJyb3IgPSAoXG4gICAgZm9ybUVsZW1lbnQsXG4gICAgaW5wdXRFbGVtZW50LFxuICAgIGVycm9yTWVzc2FnZSxcbiAgICBpbnB1dEVycm9yQ2xhc3MsXG4gICAgZXJyb3JDbGFzc1xuICApID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoZXJyb3JDbGFzcyk7XG4gIH07XG5cbiAgX2hpZGVJbnB1dEVycm9yID0gKFxuICAgIGZvcm1FbGVtZW50LFxuICAgIGlucHV0RWxlbWVudCxcbiAgICBpbnB1dEVycm9yQ2xhc3MsXG4gICAgZXJyb3JDbGFzc1xuICApID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShlcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9O1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGluYWN0aXZlQnV0dG9uQ2xhc3MpID0+IHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dExpc3QpICYmIHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGJ1dHRvbkVsZW1lbnQpIHtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9IGVsc2UgcmV0dXJuO1xuICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLmZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgaW5wdXRFbGVtZW50cyA9IHRoaXMuZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgIHRoaXMuc2VsZWN0b3JzQ29uZmlnLmlucHV0U2VsZWN0b3JcbiAgICApO1xuXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShpbnB1dEVsZW1lbnRzKTtcblxuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSB0aGlzLmZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLnNlbGVjdG9yc0NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG5cbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShcbiAgICAgIGlucHV0TGlzdCxcbiAgICAgIGJ1dHRvbkVsZW1lbnQsXG4gICAgICB0aGlzLnNlbGVjdG9yc0NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzXG4gICAgKTtcblxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoXG4gICAgICAgICAgdGhpcy5mb3JtRWxlbWVudCxcbiAgICAgICAgICBpbnB1dEVsZW1lbnQsXG4gICAgICAgICAgdGhpcy5zZWxlY3RvcnNDb25maWcuaW5wdXRFcnJvckNsYXNzLFxuICAgICAgICAgIHRoaXMuc2VsZWN0b3JzQ29uZmlnLmVycm9yQ2xhc3NcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoXG4gICAgICAgICAgaW5wdXRMaXN0LFxuICAgICAgICAgIGJ1dHRvbkVsZW1lbnQsXG4gICAgICAgICAgdGhpcy5zZWxlY3RvcnNDb25maWcuaW5hY3RpdmVCdXR0b25DbGFzc1xuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX2Nsb3NlXCIpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9wb3B1cENsb3NlT3ZlcmxheSA9XG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fb3ZlcmxheVwiKTtcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fcG9wdXBDbG9zZU92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcbiAgICB0aGlzLl9wb3B1cFRpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3RpdGxlXCIpO1xuICB9XG5cbiAgb3BlbihsaW5rVXJsLCBwbGFjZU5hbWUpIHtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbmtVcmw7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBwbGFjZU5hbWU7XG4gICAgdGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IHBsYWNlTmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBjYWxsYmFjaykge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3N1Ym1pdENhbGxiYWNrID0gY2FsbGJhY2s7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBjb25zdCBmb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICBjb25zdCBmb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuICAgIEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIikpLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgY29uc3QgZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKTtcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fc3VibWl0Q2FsbGJhY2sodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICBmb3JtLnJlc2V0KCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIGFkZEl0ZW0oY2FyZEVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQoY2FyZEVsZW1lbnQpO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IHVzZXJuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl91c2VybmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlcm5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXNlcm5hbWU6IHRoaXMuX3VzZXJuYW1lLnRleHRDb250ZW50LFxuICAgICAgam9iOiB0aGlzLl9qb2IudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgdXNlcm5hbWUsIGpvYiB9KSB7XG4gICAgdGhpcy5fdXNlcm5hbWUudGV4dENvbnRlbnQgPSB1c2VybmFtZTtcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBqb2I7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBidXR0b25FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXR0b25fZWRpdFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19qb2JcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtcy5lZGl0O1xuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSA9IHByb2ZpbGVGb3JtLmVsZW1lbnRzLm5hbWU7XG5leHBvcnQgY29uc3Qgam9iID0gcHJvZmlsZUZvcm0uZWxlbWVudHMuam9iO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX2FkZFwiKTtcbmV4cG9ydCBjb25zdCBlbGVtZW50c1NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZVNlbGVjdG9yID0gXCIucG9wdXBfcHJvZmlsZVwiO1xuZXhwb3J0IGNvbnN0IHBvcHVwQWRkU2VsZWN0b3IgPSBcIi5wb3B1cF9hZGRcIjtcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlU2VsZWN0b3IgPSBcIi5wb3B1cF9pbWFnZVwiO1xuXG5pbXBvcnQgdmFsbGUgZnJvbSBcIi4uL2ltYWdlcy92YWxsZS5qcGdcIjtcbmltcG9ydCBSdXNobW9yZSBmcm9tIFwiLi4vaW1hZ2VzL1J1c2htb3JlLmpwZ1wiO1xuaW1wb3J0IGNhbm9uIGZyb20gXCIuLi9pbWFnZXMvY2Fub24uanBnXCI7XG5pbXBvcnQgVGFob2UgZnJvbSBcIi4uL2ltYWdlcy90YWhvZS5qcGdcIjtcbmltcG9ydCBSdXRhIGZyb20gXCIuLi9pbWFnZXMvcnV0YS5qcGdcIjtcbmltcG9ydCBSb3N3ZWxsIGZyb20gXCIuLi9pbWFnZXMvUm9zd2VsbC5qcGdcIjtcbmltcG9ydCBhdmF0YXIgZnJvbSBcIi4uL2ltYWdlcy9BdmF0YXIucG5nXCI7XG5pbXBvcnQgbG9nbyBmcm9tIFwiLi4vaW1hZ2VzL2xvZ28uc3ZnXCI7XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlZhbGxlIGRlIFlvc2VtaXRlXCIsXG4gICAgbGluazogdmFsbGUsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1vbnRlIFJ1c2htb3JlXCIsXG4gICAgbGluazogUnVzaG1vcmUsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkdyYW4gQ2HDsW9uXCIsXG4gICAgbGluazogY2Fub24sXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gVGFob2VcIixcbiAgICBsaW5rOiBUYWhvZSxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUnV0YSA2NlwiLFxuICAgIGxpbms6IFJ1dGEsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlJvc3dlbGxcIixcbiAgICBsaW5rOiBSb3N3ZWxsLFxuICB9LFxuXTtcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuL3NjcmlwdHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4vc2NyaXB0cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgeyBzZWxlY3RvcnNDb25maWcgfSBmcm9tIFwiLi9zY3JpcHRzL3V0aWxzLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4vc2NyaXB0cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vc2NyaXB0cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi9zY3JpcHRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9zY3JpcHRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgXCIuL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IHtcbiAgYnV0dG9uRWRpdCxcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVKb2IsXG4gIGlucHV0TmFtZSxcbiAgam9iLFxuICBidXR0b25BZGQsXG4gIGVsZW1lbnRzU2VjdGlvbixcbiAgcG9wdXBQcm9maWxlU2VsZWN0b3IsXG4gIHBvcHVwQWRkU2VsZWN0b3IsXG4gIHBvcHVwSW1hZ2VTZWxlY3RvcixcbiAgaW5pdGlhbENhcmRzLFxufSBmcm9tIFwiLi9zY3JpcHRzL0NvbnN0LmpzXCI7XG5cbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBJbWFnZVNlbGVjdG9yKTtcblxuY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBQcm9maWxlU2VsZWN0b3IsIChpbnB1dFZhbHVlcykgPT4ge1xuICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGlucHV0VmFsdWVzLm5hbWU7XG4gIHByb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBpbnB1dFZhbHVlcy5qb2I7XG4gIHBvcHVwUHJvZmlsZS5jbG9zZSgpO1xufSk7XG5cbmNvbnN0IHBvcHVwQWRkQnV0dG9uID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBBZGRTZWxlY3RvciwgKGlucHV0VmFsdWVzKSA9PiB7XG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChcbiAgICBpbnB1dFZhbHVlcy50aXRsZSxcbiAgICBpbnB1dFZhbHVlcy51cmwsXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgIHtcbiAgICAgIGhhbmRsZUNsaWNrSW1hZ2U6ICgpID0+IHtcbiAgICAgICAgcG9wdXBJbWFnZS5vcGVuKGlucHV0VmFsdWVzLnVybCwgaW5wdXRWYWx1ZXMudGl0bGUpO1xuICAgICAgfSxcbiAgICB9XG4gICk7XG4gIGVsZW1lbnRzU2VjdGlvbi5wcmVwZW5kKG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCkpO1xufSk7XG5cbmJ1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBpbnB1dE5hbWUudmFsdWUgPSB1c2VyRGF0YS51c2VybmFtZTtcbiAgam9iLnZhbHVlID0gdXNlckRhdGEuam9iO1xuICBwb3B1cFByb2ZpbGUub3BlbigpO1xufSk7XG5cbmJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cEFkZEJ1dHRvbi5vcGVuKCk7XG59KTtcblxuZXhwb3J0IGNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlcm5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fam9iXCIsXG59KTtcblxuY29uc3Qgc2VjdGlvbkNhcmRzID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGl0ZW0ubmFtZSwgaXRlbS5saW5rLCBcIiNjYXJkLXRlbXBsYXRlXCIsIHtcbiAgICAgICAgaGFuZGxlQ2xpY2tJbWFnZTogKCkgPT4ge1xuICAgICAgICAgIHBvcHVwSW1hZ2Uub3BlbihpdGVtLmxpbmssIGl0ZW0ubmFtZSk7XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIHNlY3Rpb25DYXJkcy5hZGRJdGVtKG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCkpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmVsZW1lbnRzXCJcbik7XG5cbnNlY3Rpb25DYXJkcy5yZW5kZXJJdGVtcygpO1xuXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzQ29uZmlnLmZvcm1TZWxlY3RvcikpLmZvckVhY2goXG4gIChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IGZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZWxlY3RvcnNDb25maWcsIGZvcm1FbGVtZW50KTtcbiAgICBmb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfVxuKTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwic2VsZWN0b3JzQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJDYXJkIiwicGxhY2VOYW1lIiwibGlua1VybCIsInRlbXBsYXRlU2VsZWN0b3IiLCJfcmVmIiwiaGFuZGxlQ2xpY2tJbWFnZSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfaGFuZGxlQ2xpY2tJbWFnZSIsImtleSIsInZhbHVlIiwiY2FyZEVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwidGV4dENvbnRlbnQiLCJzcmMiLCJfdGhpcyIsImRlbGV0ZUJ1dHRvbiIsIl9jYXJkRWxlbWVudCIsImNsaWNrSW1hZ2UiLCJsaWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9nZXRUZW1wbGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsIl9kZWZpbmVQcm9wZXJ0eSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwiYWRkIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWxlbWVudCIsIkFycmF5IiwiaXNBcnJheSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsInNvbWUiLCJfdGhpczIiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiaW5wdXRFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmcm9tIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX3BvcHVwQ2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX3BvcHVwQ2xvc2VPdmVybGF5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2UiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9jYWxsU3VwZXIiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cFRpdGxlIiwiX2luaGVyaXRzIiwiYWx0IiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImNhbGwiLCJQb3B1cFdpdGhGb3JtIiwiY2FsbGJhY2siLCJfc3VibWl0Q2FsbGJhY2siLCJpbnB1dFZhbHVlcyIsImZvcm0iLCJpbnB1dCIsIm5hbWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYXBwZW5kQ2hpbGQiLCJpbm5lckhUTUwiLCJjbGVhciIsIml0ZW0iLCJVc2VySW5mbyIsInVzZXJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl91c2VybmFtZSIsIl9qb2IiLCJ1c2VybmFtZSIsImpvYiIsIl9yZWYyIiwiYnV0dG9uRWRpdCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUpvYiIsInByb2ZpbGVGb3JtIiwiZm9ybXMiLCJlZGl0IiwiaW5wdXROYW1lIiwiZWxlbWVudHMiLCJidXR0b25BZGQiLCJlbGVtZW50c1NlY3Rpb24iLCJpbml0aWFsQ2FyZHMiLCJsaW5rIiwidmFsbGUiLCJSdXNobW9yZSIsImNhbm9uIiwiVGFob2UiLCJSdXRhIiwiUm9zd2VsbCIsInBvcHVwSW1hZ2UiLCJwb3B1cFByb2ZpbGUiLCJwb3B1cEFkZEJ1dHRvbiIsIm5ld0NhcmQiLCJ0aXRsZSIsInVybCIsIm9wZW4iLCJwcmVwZW5kIiwiZ2VuZXJhdGVDYXJkIiwidXNlckRhdGEiLCJ1c2VySW5mbyIsImdldFVzZXJJbmZvIiwic2VjdGlvbkNhcmRzIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=